- onException:
    handled:
      constant: "true"
    exception:
      - "aiep.inf.api.key.exception.InvalidApiKeyException"
      - "java.lang.Exception"
    steps:
      - process:
          ref: ApiErrorHandlerProcessor
      - log: ${body}
- onCompletion:
    steps:
      - to: "direct:ApiLogToKafka"
- route:
    autoStartup: true
    id: "Template_OpenApi_Relay"
    from:
      uri: "direct:Template_OpenApi_Relay"
      steps:
        - process:
            ref: TemplateParametersToVariableProcessor
        - to: "direct:ApiKeyCheck"
        - toD: "${variable.relay[url]}"
        - unmarshal:
            json: {}
        - log: Rest response completed! ${body}
